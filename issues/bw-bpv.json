{
  "assignee": "",
  "blocked_by": [],
  "blocks": [],
  "created": "2026-02-20T20:34:21Z",
  "description": "## Problem\n\nNo command to show the history of a specific issue. After compaction or a new session, an agent can bw show to see current state but cannot see how it got there.\n\n## bd alignment\n\nbd history \u003cid\u003e requires Dolt backend and returns 'No history found' on SQLite. bw has a natural advantage -- every mutation is a structured git commit on the beadwork branch. We can show the full lifecycle of any issue by filtering commit messages for its ID.\n\n## Implementation\n\n### TreeFS (internal/treefs/treefs.go)\n- Add Time time.Time and Author string to CommitInfo struct\n- Add AllCommits() ([]CommitInfo, error):\n  - Walk all commits on tracked ref via repo.Log(\u0026git.LogOptions{From: t.baseRef})\n  - For each commit, populate CommitInfo{Hash, Message, Time: c.Author.When, Author: c.Author.Name}\n  - Return newest-first (natural git log order)\n\n### CLI (cmd/bw/history.go) -- new file\n- HistoryArgs{ID, Limit, JSON}\n- parseHistoryArgs: positional \u003cid\u003e, flags --limit N, --json\n- cmdHistory:\n  1. Resolve issue ID via store.Get(id) to get full ID and confirm existence\n  2. Get TreeFS via repo, call AllCommits()\n  3. Filter commits where Message contains the full resolved issue ID\n  4. Reverse to chronological order (oldest first)\n  5. Apply --limit if set\n  6. Display each entry as: timestamp author intent-message\n     Example output:\n       2026-02-18 14:32  alice  create bw-a3f8 p2 task \"Fix login bug\"\n       2026-02-18 15:01  alice  update bw-a3f8 status=in_progress\n       2026-02-19 09:15  bob    comment bw-a3f8 \"Tried X, failed because Y\"\n       2026-02-19 11:30  alice  close bw-a3f8\n  7. JSON mode: [{hash, timestamp, author, intent}]\n  8. No git commit created (read-only command)\n\n### Command registration (cmd/bw/command.go)\n- Add to commands array with positional \u003cid\u003e, flags --limit N and --json\n- Add 'history' to 'Working With Issues' group\n\n## Acceptance criteria\n\n- [ ] bw history \u003cid\u003e shows chronological list of all mutations for that issue\n- [ ] Each entry includes timestamp, git author name, and intent message\n- [ ] Output is oldest-first (chronological)\n- [ ] bw history \u003cid\u003e --limit 5 shows only the last 5 entries\n- [ ] bw history \u003cid\u003e --json outputs [{hash, timestamp, author, intent}]\n- [ ] bw history nonexistent returns error\n- [ ] Only commits mentioning the resolved issue ID are shown (no false matches)\n- [ ] Works after multiple operations: create, update, label, comment, close, reopen\n- [ ] bw history --help shows usage\n- [ ] No git commit is created (read-only)\n\n## Test requirements\n\n- Unit test for TreeFS.AllCommits returning commits with Time and Author\n- Unit test for history command filtering commits by issue ID\n- Unit test for --limit flag truncation\n- Unit test for JSON output format\n- Unit test for nonexistent issue error\n- Integration test: create issue, perform several operations, verify history shows all\n- Existing tests pass (go test ./...)",
  "id": "bw-bpv",
  "labels": [],
  "priority": 2,
  "status": "open",
  "title": "Add bw history command",
  "type": "feature",
  "updated_at": "2026-02-20T20:34:21Z"
}

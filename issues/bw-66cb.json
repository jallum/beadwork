{
  "assignee": "claude",
  "blocked_by": [],
  "blocks": [],
  "created": "2026-02-20T06:51:20Z",
  "description": "bd has 'dep tree' — an issue-centric dependency tree rooted at a single issue. Walks edges recursively with direction control (up/down/both), max-depth, status filtering. Our 'bw graph \u003cid\u003e' shows the connected component as a layered DAG but lacks direction control and tree-depth perspective. Decide whether to add 'bw dep tree' as a separate subcommand or extend 'bw graph \u003cid\u003e' with direction/depth flags.",
  "id": "bw-66cb",
  "labels": [],
  "comments": [
    {
      "text": "test comment for debugging show output",
      "timestamp": "2026-02-21T03:50:46Z"
    },
    {
      "text": "second test comment",
      "timestamp": "2026-02-21T03:51:31Z"
    },
    {
      "text": "## Evaluation: bd dep tree equivalent\n\n### What bd dep tree does\nIssue-centric dependency tree with direction control (up/down/both), max-depth limit, and status filtering. Walks edges recursively from a root issue.\n\n### What bw graph does today\n- `bw graph \u003cid\u003e` — walks downward (blocks edges) from root, renders text tree with box-drawing chars\n- `bw graph --all` — all open issues grouped by connected component\n- `--json` — GraphNode array output\n- No direction control, no depth limit, no status filtering\n- walkGraph in Store.Graph() is a simple downward-only DFS\n\n### Recommendation: extend bw graph, don't add bw dep tree\n\nAdding a separate `bw dep tree` subcommand duplicates graph's purpose. Better to extend `bw graph \u003cid\u003e` with three new flags:\n\n1. `--direction up|down|both` (default: down) — controls edge traversal direction. \"up\" walks blocked_by edges (who blocks this?). \"both\" walks both directions from root.\n2. `--depth N` — max recursion depth (0 = unlimited, default)\n3. `--status open|closed|in_progress|all` — filter displayed nodes by status (default: all)\n\n### Implementation plan\n\n**Store layer** (internal/issue/issue.go):\n- Extend walkGraph to accept direction enum and depth limit\n- Add status filter parameter to Graph() — filter nodes after walking\n- Build reverse adjacency (blocked_by → blocks) for upward walking\n- \"both\" direction: walk both edge sets from each node\n\n**Command layer** (cmd/bw/graph.go):\n- Add --direction, --depth, --status flags to graph command definition\n- Parse and validate new flags in parseGraphArgs\n- Pass through to Store.Graph()\n- fprintTree already handles arbitrary tree shapes, no changes needed there\n\n**Tests** (cmd/bw/graph_test.go):\n- Upward walk from leaf shows ancestors\n- Depth limit truncates at N levels\n- Status filter excludes non-matching nodes\n- Bidirectional walk from middle node\n- Combine depth + direction + status\n\n### Effort estimate\nSmall-medium. The graph walking logic is simple (~10 lines today). Main work is the bidirectional adjacency map and plumbing flags through. No architectural changes needed.\n\n### Interaction with bw-01c3\nOutput format evaluation (bw-01c3) is independent — it's about rendering, this is about traversal. They can proceed in parallel and won't conflict.",
      "timestamp": "2026-02-21T04:47:13Z"
    },
    {
      "text": "## Revised plan (v2): replace graph with show --map, surface actionable tips\n\nPrevious plan (extend graph with direction/depth flags) is scrapped. The insight: rather than giving users graph traversal knobs, surface the _actionable information_ directly.\n\n### Design\n\n1. **Fold dependency context into `bw show` as default output** — new BLOCKED BY and BLOCKS sections replace the current flat dep listings. No --map flag needed; it's always shown. Use `--only` flag to select specific sections (e.g. `--only summary,blockedby`) if you want targeted output.\n\n2. **Surface leaves, not chains** — BLOCKED BY walks the full blocker tree but only shows the _tips_ (issues with no further open blockers). If A←B←C←D, showing A displays D, not the full chain. These are the issues that need work to unblock you.\n\n3. **BLOCKS section** — shows what closing this issue would eventually unblock (the downstream tips/leaves).\n\n4. **Remove `bw graph` command entirely** — `show` handles the single-issue case better. The `--all` project-wide view is dropped (low real-world use).\n\n5. **Revisit `bw ready`** — apply the same tips logic: filter to issues that are genuinely actionable (the leaves across all open work), not just \"open with no open blockers.\"\n\n### What \"tips\" means\nAn issue is a tip if:\n- It has no open blockers (it's workable), AND\n- Working it makes progress (it either has no deps at all, or it's the leaf of a blocked chain)\n\n### Implementation order\n1. Add leaf-walking logic to Store (walk blocker tree, return tips)\n2. Update `bw show` output to use new BLOCKED BY / BLOCKS sections\n3. Add `--only` flag for section filtering\n4. Remove `bw graph` command\n5. Update `bw ready` to use tips logic\n6. Update tests",
      "timestamp": "2026-02-21T13:25:18Z"
    }
  ],
  "priority": 2,
  "status": "in_progress",
  "title": "Dependency graph: surface actionable tips in show and ready",
  "type": "epic",
  "updated_at": "2026-02-21T13:29:00Z"
}
